<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Property Tracking Test</title>
</head>
<body>
    <h1>Property Override Tracking</h1>
    <div id="output"></div>
    
    <!-- Basic DOM elements -->
    <div style="display: none;">
        <div id="room-info"></div>
        <div id="question-area"></div>
        <div id="score-display"></div>
        <div id="game-controls">
            <button id="new-question-btn">New</button>
            <button id="hint-btn">Hint</button>
            <button id="skip-btn">Skip</button>
        </div>
    </div>

    <script>
        let output = document.getElementById('output');
        
        function log(msg) {
            output.innerHTML += msg + '<br>';
            console.log(msg);
        }
        
        // Create a simple test class to check if the issue is in the class structure
        class TestUIManager {
            constructor() {
                log('1. Starting TestUIManager constructor');
                
                this.questionActive = false;
                log('2. Set questionActive property: ' + this.questionActive);
                
                // Check if method exists
                log('3. Method type: ' + typeof this.isQuestionActive);
                
                // Try to call it
                try {
                    let result = this.isQuestionActive();
                    log('4. Method call successful: ' + result);
                } catch (error) {
                    log('4. Method call failed: ' + error.message);
                }
                
                log('5. Constructor complete');
            }
            
            isQuestionActive() {
                return this.questionActive === true;
            }
        }
        
        log('Testing simple class...');
        let testInstance = new TestUIManager();
        
        log('\\n--- Testing with actual files ---\\n');
        
        // Load the actual files
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
        
        async function testReal() {
            try {
                await loadScript('src/dataLoader.js');
                await loadScript('src/gameState.js');
                await loadScript('src/quizEngine.js');
                await loadScript('src/uiManager.js');
                
                log('Scripts loaded');
                
                // Check prototype first
                log('Prototype check: ' + typeof UIManager.prototype.isQuestionActive);
                
                const dataLoader = new DataLoader();
                const gameState = new GameState(dataLoader);
                const quizEngine = new QuizEngine(dataLoader, gameState);
                
                log('Creating UIManager...');
                const uiManager = new UIManager(dataLoader, gameState, quizEngine);
                
                log('Final type: ' + typeof uiManager.isQuestionActive);
                log('Has own property: ' + uiManager.hasOwnProperty('isQuestionActive'));
                
                if (uiManager.hasOwnProperty('isQuestionActive')) {
                    log('Own property value: ' + uiManager.isQuestionActive);
                }
                
            } catch (error) {
                log('Error: ' + error.message);
            }
        }
        
        testReal();
    </script>
</body>
</html>