<!DOCTYPE html>
<html>
<head>
    <title>LobeLabyrinth Debug Test</title>
</head>
<body>
    <h1>Debug Test Results</h1>
    <div id="results"></div>
    
    <script>
        // Capture console errors
        const errors = [];
        const originalError = console.error;
        console.error = function(...args) {
            errors.push(args.join(' '));
            originalError.apply(console, args);
        };
        
        // Test loading the game scripts
        async function testGameLoading() {
            const results = document.getElementById('results');
            
            try {
                // Load scripts in order
                await loadScript('src/dataLoader.js');
                await loadScript('src/gameState.js');
                await loadScript('src/quizEngine.js');
                await loadScript('src/uiManager.js');
                
                results.innerHTML += '<p>✅ All scripts loaded successfully</p>';
                
                // Test class instantiation
                const dataLoader = new DataLoader();
                results.innerHTML += '<p>✅ DataLoader created</p>';
                
                const gameState = new GameState(dataLoader);
                results.innerHTML += '<p>✅ GameState created</p>';
                
                const quizEngine = new QuizEngine(dataLoader, gameState);
                results.innerHTML += '<p>✅ QuizEngine created</p>';
                
                // Test event system
                if (typeof gameState.on === 'function') {
                    results.innerHTML += '<p>✅ GameState has event system</p>';
                } else {
                    results.innerHTML += '<p>❌ GameState missing event system</p>';
                }
                
                if (typeof quizEngine.on === 'function') {
                    results.innerHTML += '<p>✅ QuizEngine has event system</p>';
                } else {
                    results.innerHTML += '<p>❌ QuizEngine missing event system</p>';
                }
                
                // Test event listener registration
                gameState.on('test', () => {});
                quizEngine.on('test', () => {});
                results.innerHTML += '<p>✅ Event listeners registered successfully</p>';
                
            } catch (error) {
                results.innerHTML += `<p>❌ Error: ${error.message}</p>`;
            }
            
            // Show any captured errors
            if (errors.length > 0) {
                results.innerHTML += '<h2>Console Errors:</h2>';
                errors.forEach(error => {
                    results.innerHTML += `<p style="color:red;">❌ ${error}</p>`;
                });
            } else {
                results.innerHTML += '<p>✅ No console errors detected</p>';
            }
        }
        
        function loadScript(src) {
            return new Promise((resolve, reject) => {
                const script = document.createElement('script');
                script.src = src;
                script.onload = resolve;
                script.onerror = reject;
                document.head.appendChild(script);
            });
        }
        
        // Run test when page loads
        testGameLoading();
    </script>
</body>
</html>